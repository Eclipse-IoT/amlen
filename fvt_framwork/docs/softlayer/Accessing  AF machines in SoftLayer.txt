Instructions for accessing the servers in AF on SoftLayer

Because of some security incidents, we changed the ssh key used in AF.  The new key files are no longer included in the github repo, for obvious reasons.  Please check the fvt_framwork component in the IMADev RTC stream.

I also disabled password authentication on most servers in AF, and disabled access to the ssh port (via local firewalls) to the sshd port on the public interfaces. On the AFharness machine, you can access sshd over the public interface as long as you are coming from either an ip address from an IBM office, or from the IBM VPN.  The same is true of the MessageSightPublish machine.  But for the rest of the machines, to connect, you need to be able to connect to the internal SoftLayer network (via their VPN client or by some other means: using the AFharness as a proxy).  Everyone is expected to be able to configure and get the internal VPN working (and instructions for doing so are outside the scope of this documentation).

The main connection method to access AF machines is via ssh, using the ssh private key, to the internal IP address.  For example, to connect to the harness machine, you would do the following (example is from Linux, but should be similar on Apple machines):

ssh -i /path/to/id_sample_harness_sshkey root@<harness_machine_ip_address>

VNC is not currently enabled persistently on the AFharness machine, since it consumes resources, and very few folks besides me access AFharness anymore (and I don't use vanilla VNC).  If you really need VNC, there is a service defined as 'vncserver@:2.service' that can be started with:

systemctl start vncserver@:2.service

Verify with 'systemctl status vncserver@:2.service' that it came up.  I have it starting the MATE desktop by default (which is basically the old GNOME 2.0 desktop). To start vnc, you need to do the following:

1) Connect to AFharness over the public IP address
2) Connect using the aforementioned ssh key
3) Pass in the -X flag to allow X apps to be tunnelled back to the client
4) Start vncviewer locally

So the complete commands on Linux would look like:

ssh -X -i /path/to/id_sample_harness_sshkey root@<harness_machine_ip_address>
vncviewer -PasswordFile /root/.vnc/passwd localhost:2

The -PasswordFile flag and argument allows us to avoid having to know the password.  Being tunnelled in over ssh makes this much more secure than how we were doing it previously.

Once vnc is started, just run:

/root/start_STAXMonitor.sh

and the STAX Monitor GUI should open.

It's better to not use the GUI, if possible, however.  See directions in the document or section entitled "Cleaning up AF jobs manually".






