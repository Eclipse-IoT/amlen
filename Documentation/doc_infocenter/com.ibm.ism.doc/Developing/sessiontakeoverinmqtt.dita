<?xml version="1.0" encoding="UTF-8"?>
<!--Arbortext, Inc., 1988-2011, v.4002-->
<!DOCTYPE concept PUBLIC  "-//OASIS//DTD DITA Concept//EN"
 "concept.dtd">
<?Pub Sty _display FontColor="red"?>
<?Pub Inc?>
<concept id="sessiontakeoverinmqtt" xml:lang="en-us">
<title>MQTT considerations for large-scale public subscription deployments</title>
<shortdesc>When you develop MQTT subscriber applications for large-scale
public deployments, there are some important factors to consider.
 The use of the same client ID by different clients can result in
the unexpected closure of connections. You can prevent such connection
disruptions by developing applications that ensure that client IDs
are unique. You can then use connection policies to ensure that only
these unique client IDs are allowed to connect. In large-scale subscription
environments, it is also important to ensure that connections and
their associated resources are used only for as long as they are needed.</shortdesc>
<conbody>
<section><title>Preventing session takeover for MQTT 5.0 and MQTT 3.1.1 subscriber applications </title><p>If you are using an MQTT 5.0 or MQTT 3.1.1 client, you can prevent MQTT session takeover, as follows:<ol>
<li>Develop client applications that specify zero-length client IDs. The MQTT 5.0 and MQTT 3.1.1
specifications permit the use of zero-length client IDs for clients that connect specifying
<codeph>cleanSession=True</codeph>. When you use a zero-length client ID to connect, <ph
conref="../TextEntities.dita#TextEntities/ISM"/> generates a unique client ID and enforces the
requirement for a clean session. </li>
<li>Create connection policies that have a <parmname>ClientID</parmname> filter of
<codeph>_*</codeph>. <note>Client IDs that are automatically generated start with an
underscore.</note></li>
<li>Configure endpoints with connection policies that allow client IDs that are automatically
generated.</li>
<?Pub Caret -2?>
</ol></p></section>
<section><title>Preventing session takeover for MQTT 5.0, MQTT 3.1 and MQTT 3.0 subscriber
applications</title><p>If you are using an MQTT 5.0, MQTT 3.1 or MQTT 3.0 client, you can prevent MQTT session takeover,
as follows:<ol>
<li>Develop client applications that generate unique client IDs; the client IDs that are generated
comprise a leading fixed string of characters and a randomly generated string of characters. <p>You
can use the fixed string in the client ID to configure the connection policies that authorize
connection. The randomly generated string of characters prevents unintended disruption of
connections that would occur if different clients generate the same client IDs for their
connections.</p></li>
<li>Create connection policies that have a <parmname>ClientID</parmname> filter that starts with the
fixed string generated by your client application.<p>For example, if the fixed string in your client
ID is <codeph>My_public_app</codeph>, ensure that you set the <parmname>ClientID</parmname> filter
to <codeph>My_public_app*</codeph>.<note>In MQTT 5.0, 3.1 and 3.0, client ID length must not exceed
23 characters.</note></p></li>
<li>Configure endpoints with connection policies that authorize only those client IDs that start
with the fixed segment of the client IDs that your client application generates.</li>
</ol></p></section>
<section><title>Ensuring efficient use of connection resources</title><p></p>To
ensure that connections are used for only as long as they are needed,
you can set the <parmname>AllowDurable</parmname> parameter in the
connection policy to <codeph>False</codeph>; only MQTT clients with
a <codeph>cleanSession=True</codeph> setting can connect.</section>
</conbody>
</concept>
<?Pub *0000003653?>
