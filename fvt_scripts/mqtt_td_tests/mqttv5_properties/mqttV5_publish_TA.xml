<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 * Copyright (c) 2018-2021 Contributors to the Eclipse Foundation
 * 
 * See the NOTICE file(s) distributed with this work for additional
 * information regarding copyright ownership.
 * 
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0
 * 
 * SPDX-License-Identifier: EPL-2.0
 */
-->
<IsmWSTest name="mqttV5_publish_TA" >
<!--
    Test MQTTv5 Spec 3.3.2.3.4 Topic Alias Publish Property
     0x23 - Topic Alias (2 bytes)
CONNACK returns the Servers Topic Alias Max:  0x22|0008, 
Sub Client CONNECTs with TopicAliasMax Less than Server's TopicAliasMax (3) 
WildCard Sub Client CONNECTs with TopicAliasMax Greater than Server's TopicAliasMax (10)

Arriving messages at each client will have TopicAlias set to Least Common Demoninator of TopicAliasMax between the Server and Client
SubClient only have 3, WildCard will have 8 TopicAlias
Messages that arrive on topics after TopicAliasMax was reached will NOT HAVE TopicAlias Property. -->	

    <SyncClient>
        <server>
            <include>../common/JMS_syncip.xml</include>
            <include>../common/JMS_syncport.xml</include>
        </server>
        <solution>mqttV5_publish_TA</solution>
    </SyncClient>
    
<!--  ==========  TopicAlias  0x23(+2 bytes)  ==========  -->
<!--   
CONNECT TopicAliasMax  0x22 (of Client)
CONNACK TopicAliasMax  0x22 (of Server)
PUBLISH TopicAlias     0x23

-->
    <Action name="TopicAlias_PubMax" type="CompositeAction">

        <Action name="CreateConnectionV5" type="CreateConnection" >
            <ActionParameter name="structure_id">ConV5</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="connectionType">PAHO-MQTTv5</ActionParameter>
            <ApiParameter name="protocol">mqtt</ApiParameter>
            <include>../common/MQTT_server.xml</include>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="clientId">d:org4iot2:pubProps:TAlias</ApiParameter>  
            <ApiParameter name="cleanSession">true</ApiParameter>
        </Action>
        
        <Action name="CreateMessage1" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg1</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:1, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/1 }</ApiParameter>
            <ApiParameter name="topicAlias">1</ApiParameter>
        </Action>
        
        <Action name="CreateMessage2" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg2</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:2, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/2 }</ApiParameter>
            <ApiParameter name="topicAlias">2</ApiParameter>
        </Action>
        
        <Action name="CreateMessage3" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg3</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:3, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/3 }</ApiParameter>
            <ApiParameter name="topicAlias">3</ApiParameter>
        </Action>
        
        <Action name="CreateMessage4" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg4</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:4, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/4 }</ApiParameter>
            <ApiParameter name="topicAlias">4</ApiParameter>
        </Action>
        
        <Action name="CreateMessage5" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg5</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:5, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/5 }</ApiParameter>
            <ApiParameter name="topicAlias">5</ApiParameter>
        </Action>
        
        <Action name="CreateMessage6" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg6</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:6, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/6 }</ApiParameter>
            <ApiParameter name="topicAlias">6</ApiParameter>
        </Action>
        
        <Action name="CreateMessage7" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg7</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:7, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/7 }</ApiParameter>
            <ApiParameter name="topicAlias">7</ApiParameter>
        </Action>
        
        <Action name="CreateMessage8" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg8</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:8, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/8 }</ApiParameter>
            <ApiParameter name="topicAlias">8</ApiParameter>
        </Action>
        
        <Action name="CreateMessage9" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg9</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:9, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/9 }</ApiParameter>
            <ApiParameter name="topicAlias">9</ApiParameter>
        </Action>
        
        <Action name="CreateMessage10" type="CreateMessage">
            <ActionParameter name="structure_id">txmsg10</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Msg 1 clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:10, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/10 }</ApiParameter>
            <ApiParameter name="topicAlias">10</ApiParameter>
        </Action>

        
        <Action name="sync_TA_1" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA1</ActionParameter>
            <ActionParameter name="component_list">tTA1;rTA1;wTA1</ActionParameter>
            <ActionParameter name="timeout">20000</ActionParameter>
        </Action>

        <Action name="SendMessage1" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg1</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/1</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_2" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA2</ActionParameter>
            <ActionParameter name="component_list">tTA2;rTA2;wTA2</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage2" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg2</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/2</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_3" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA3</ActionParameter>
            <ActionParameter name="component_list">tTA3;rTA3;wTA3</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage3" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg3</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/3</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_4" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA4</ActionParameter>
            <ActionParameter name="component_list">tTA4;rTA4;wTA4</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage4" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg4</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/4</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_5" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA5</ActionParameter>
            <ActionParameter name="component_list">tTA4;rTA4;wTA5</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage5" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg5</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/5</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_6" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA6</ActionParameter>
            <ActionParameter name="component_list">tTA6;rTA6;wTA6</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage6" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg6</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/6</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_7" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA7</ActionParameter>
            <ActionParameter name="component_list">tTA7;rTA7;wTA7</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage7" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg7</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/7</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_8" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA8</ActionParameter>
            <ActionParameter name="component_list">tTA8;rTA8;wTA8</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage8" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg8</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/8</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_9" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA9</ActionParameter>
            <ActionParameter name="component_list">tTA9;rTA9;wTA9</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage9" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg9</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/9</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_10" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA10</ActionParameter>
            <ActionParameter name="component_list">tTA10;rTA10;wTA10</ActionParameter>
            <ActionParameter name="timeout">1000</ActionParameter>
        </Action>

        <Action name="SendMessage10" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg10</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/10</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>

        
        <Action name="sync_TA_11" type="SyncComponentAction"> 
            <ActionParameter name="component_name">tTA11</ActionParameter>
            <ActionParameter name="component_list">tTA11;rTA11;wTA11</ActionParameter>
            <ActionParameter name="timeout">20000</ActionParameter>
        </Action>

        <Action name="SendMessage11" type="SendMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="message_id">txmsg1</ActionParameter>
            <ActionParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/1</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
            <ActionParameter name="RETAIN">false</ActionParameter>
        </Action>
        
        <Action name="CheckConnectAfterPubs" type="CheckConnection">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="isConnected">true</ActionParameter>
        </Action>    

        <Action name="CloseConnectionV5" type="CloseConnection">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
        </Action>    
    </Action>
	
	
<!--  =========  TopicAlias_PubMax_sub  ==========  -->
    <Action name="TopicAlias_PubMax_sub" type="CompositeAction">

        <Action name="CreateConnectionV5" type="CreateConnection" >
            <ActionParameter name="structure_id">ConV5</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="connectionType">PAHO-MQTTv5</ActionParameter>
            <ApiParameter name="protocol">mqtt</ApiParameter>
            <include>../common/MQTT_server.xml</include>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="clientId">a:org4iot2:sub:TA</ApiParameter>  
            <ApiParameter name="cleanSession">true</ApiParameter>
            <ApiParameter name="topicAliasIn">3</ApiParameter> 
        </Action>
<!--
    MQTT receive 10 CONNECT: connect=22: len=62 

00044d515454 05 c2 0023 03 22 0003 0011 613a 6f726734696f74323a 7375623a 5441 0011 613a 6f726734696f74323a 7375623a 5441 0008 <pswd>
[..MQTT...#."....a:org4iot2:sub:TA..a:org4iot2:sub:TA..]

    MQTT send 20 CONNACK connect=22: len=9 
00 00 06 22 0003 21 0100 [..."..!..]
-->    
        <Action name="Subscribe1" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/1</ApiParameter>
            <ApiParameter name="QoS">0</ApiParameter>
            <ApiParameter name="expectedrc">0</ApiParameter>
        </Action>
        
        <Action name="Subscribe2" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/2</ApiParameter>
            <ApiParameter name="QoS">1</ApiParameter>
            <ApiParameter name="expectedrc">1</ApiParameter>
        </Action>
        
        <Action name="Subscribe3" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/3</ApiParameter>
            <ApiParameter name="QoS">2</ApiParameter>
            <ApiParameter name="expectedrc">2</ApiParameter>
        </Action>
        
        <Action name="Subscribe4" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/4</ApiParameter>
            <ApiParameter name="QoS">1</ApiParameter>
            <ApiParameter name="expectedrc">1</ApiParameter>
        </Action>
        
        <Action name="Subscribe5" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/5</ApiParameter>
            <ApiParameter name="QoS">2</ApiParameter>
            <ApiParameter name="expectedrc">2</ApiParameter>
        </Action>
        
        <Action name="Subscribe6" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/6</ApiParameter>
            <ApiParameter name="QoS">0</ApiParameter>
            <ApiParameter name="expectedrc">0</ApiParameter>
        </Action>
        
        <Action name="Subscribe7" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/7</ApiParameter>
            <ApiParameter name="QoS">2</ApiParameter>
            <ApiParameter name="expectedrc">2</ApiParameter>
        </Action>
        
        <Action name="Subscribe8" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/8</ApiParameter>
            <ApiParameter name="QoS">0</ApiParameter>
            <ApiParameter name="expectedrc">0</ApiParameter>
        </Action>
        
        <Action name="Subscribe9" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/9</ApiParameter>
            <ApiParameter name="QoS">1</ApiParameter>
            <ApiParameter name="expectedrc">1</ApiParameter>
        </Action>
        
        <Action name="Subscribe10" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/10</ApiParameter>
            <ApiParameter name="QoS">2</ApiParameter>
            <ApiParameter name="expectedrc">2</ApiParameter>
        </Action>
        
		
        <Action name="sync_TA_1" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA1</ActionParameter>
            <ActionParameter name="component_list">tTA1;rTA1;wTA1</ActionParameter>
            <ActionParameter name="timeout">20000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg1" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg1" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:1, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/1 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ActionParameter name="compareTopicAlias">1</ActionParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
<!--  Defect (task) 206976  unable to CHECK TopicAlias on Subscribe  -->
<!--
    MQTT send 32 PUBLISH connect=22: len=192 
00000: 003d696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.=iot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 416c6961 732f666d 742f3100  [evt/publishPropertyTAlias/fmt/1.]
00064: 01 03  23 0001  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f 74323a70  [..#..Msg:{ clientId=d:org4iot2:p]
00096: 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365 2c20746f  [ubProps:TAlias, retain:false, to]
00128: 70696341 6c696173 3a312c20 516f533a 322c2074 6f706963 3a696f74 2d322f65  [picAlias:1, QoS:2, topic:iot-2/e]
00160: 76742f70 75626c69 73685072 6f706572 74795441 6c696173 2f666d74 2f31207d  [vt/publishPropertyTAlias/fmt/1 }]

0x23 Topic Alias 0001
-->		
        <Action name="sync_TA_2" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA2</ActionParameter>
            <ActionParameter name="component_list">tTA2;rTA2;wTA2</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg2" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg2" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:2, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/2 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ActionParameter name="compareTopicAlias">2</ActionParameter>
            <ActionParameter name="compareQoS">1</ActionParameter>
        </Action>
<!--
    MQTT send 32 PUBLISH connect=22: len=192 
00000: 003d696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.=iot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 416c6961 732f666d 742f3200  [evt/publishPropertyTAlias/fmt/2.]
00064: 02 03  23 0002  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f 74323a70  [..#..Msg:{ clientId=d:org4iot2:p]
00096: 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365 2c20746f  [ubProps:TAlias, retain:false, to]
00128: 70696341 6c696173 3a322c20 516f533a 322c2074 6f706963 3a696f74 2d322f65  [picAlias:2, QoS:2, topic:iot-2/e]
00160: 76742f70 75626c69 73685072 6f706572 74795441 6c696173 2f666d74 2f32207d  [vt/publishPropertyTAlias/fmt/2 }]

0x23 TopicAlias 0002
-->		
        <Action name="sync_TA_3" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA3</ActionParameter>
            <ActionParameter name="component_list">tTA3;rTA3;wTA3</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg3" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg3" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:3, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/3 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ActionParameter name="compareTopicAlias">3</ActionParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--
    MQTT send 32 PUBLISH connect=22: len=192 
00000: 003d696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.=iot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 416c6961 732f666d 742f3300  [evt/publishPropertyTAlias/fmt/3.]
00064: 03 03  23 0003  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f 74323a70  [..#..Msg:{ clientId=d:org4iot2:p]
00096: 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365 2c20746f  [ubProps:TAlias, retain:false, to]
00128: 70696341 6c696173 3a332c20 516f533a 322c2074 6f706963 3a696f74 2d322f65  [picAlias:3, QoS:2, topic:iot-2/e]
00160: 76742f70 75626c69 73685072 6f706572 74795441 6c696173 2f666d74 2f33207d  [vt/publishPropertyTAlias/fmt/3 }]
2018-05-16T16:56:53.051Z tcpiop.1 pxmqtt.c:2536: MQTT receive: command=PUBLISH connect=23 inprogress=0

0x23 TopicAlias 0003
-->		
        <Action name="sync_TA_4" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA4</ActionParameter>
            <ActionParameter name="component_list">tTA4;rTA4;wTA4</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg4" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg4" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:4, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/4 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ActionParameter name="hasTopicAlias">false</ActionParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
<!--        
    MQTT send 32 PUBLISH connect=22: len=189 
00000: 003d696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.=iot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 416c6961 732f666d 742f3400  [evt/publishPropertyTAlias/fmt/4.]
00064: 04 00 4d73 673a7b20 636c6965 6e744964 3d643a6f 72673469 6f74323a 70756250  [..Msg:{ clientId=d:org4iot2:pubP]
00096: 726f7073 3a54416c 6961732c 20726574 61696e3a 66616c73 652c2074 6f706963  [rops:TAlias, retain:false, topic]
00128: 416c6961 733a342c 20516f53 3a322c20 746f7069 633a696f 742d322f 6576742f  [Alias:4, QoS:2, topic:iot-2/evt/]
00160: 7075626c 69736850 726f7065 72747954 416c6961 732f666d 742f3420 7d        [publishPropertyTAlias/fmt/4 }]

NO PROPERTIES, No Topic Alias
-->	
        <Action name="sync_TA_5" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA5</ActionParameter>
            <ActionParameter name="component_list">tTA5;rTA5;wTA5</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg5" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg5" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:5, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/5 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ActionParameter name="hasTopicAlias">false</ActionParameter>
            <ActionParameter name="compareQoS">1</ActionParameter>
        </Action>
        
		
        <Action name="sync_TA_6" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA6</ActionParameter>
            <ActionParameter name="component_list">tTA6;rTA6;wTA6</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg6" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg6" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:6, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/6 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ActionParameter name="hasTopicAlias">false</ActionParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
        
		
        <Action name="sync_TA_7" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA7</ActionParameter>
            <ActionParameter name="component_list">tTA7;rTA7;wTA7</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg7" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg7" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:7, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/7 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="hasTopicAlias">false</ApiParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
        
		
        <Action name="sync_TA_8" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA8</ActionParameter>
            <ActionParameter name="component_list">tTA8;rTA8;wTA8</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg8" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg8" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:8, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/8 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="hasTopicAlias">false</ApiParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
        
		
        <Action name="sync_TA_9" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA9</ActionParameter>
            <ActionParameter name="component_list">tTA9;rTA9;wTA9</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg9" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg9" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:9, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/9 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="hasTopicAlias">false</ApiParameter>
            <ActionParameter name="compareQoS">1</ActionParameter>
        </Action>
        
		
        <Action name="sync_TA_10" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA10</ActionParameter>
            <ActionParameter name="component_list">tTA10;rTA10;wTA10</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg10" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg10" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg 1 clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:10, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/10 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="hasTopicAlias">false</ApiParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--        
    MQTT send 34 PUBLISH connect=22: len=200 
00000: 0042696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Biot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f3130  0005  00  4d73672031 20636c69 656e7449 643d643a 6f726734 696f7432  [t/10...Msg 1 clientId=d:org4iot2]
00096: 3a707562 50726f70 733a5441 6c696173 2c207265 7461696e 3a66616c 73652c20  [:pubProps:TAlias, retain:false, ]
00128: 746f7069 63416c69 61733a31 302c2051 6f533a32 2c20746f 7069633a 696f742d  [topicAlias:10, QoS:2, topic:iot-]
00160: 322f6576 742f7075 626c6973 6850726f 70657274 79546f70 6963416c 6961732f  [2/evt/publishPropertyTopicAlias/]
00192: 666d742f 3130207d                                                        [fmt/10 }]


Still no Properties
-->
        <Action name="sync_TA_11" type="SyncComponentAction"> 
            <ActionParameter name="component_name">rTA11</ActionParameter>
            <ActionParameter name="component_list">tTA11;rTA11;wTA11</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg11" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg11" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:1, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/1 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">1</ApiParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
<!--
    MQTT send 30 PUBLISH connect=22: len=133 
00000: 0000  03 23 0001  4d73 673a7b20 636c6965 6e744964 3d643a6f 72673469 6f74323a  [...#..Msg:{ clientId=d:org4iot2:]
00032: 70756250 726f7073 3a54416c 6961732c 20726574 61696e3a 66616c73 652c2074  [pubProps:TAlias, retain:false, t]
00064: 6f706963 416c6961 733a312c 20516f53 3a302c20 746f7069 633a696f 742d322f  [opicAlias:1, QoS:0, topic:iot-2/]
00096: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00128: 742f3120 7d                                                              [t/1 }]

0000 Length TopicName and Property 0x23 TopicAlias 0001
-->

        <Action name="CheckConnectAfterPub1" type="CheckConnection">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="isConnected">true</ActionParameter>
        </Action>    

        <Action name="CloseConnectionV5" type="CloseConnection">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
        </Action>    
    </Action>
	
	
<!--  =========  TopicAlias_PubMax_wildcardsub  ==========  -->
    <Action name="TopicAlias_PubMax_wildcardsub" type="CompositeAction">

        <Action name="CreateConnectionV5" type="CreateConnection" >
            <ActionParameter name="structure_id">ConV5</ActionParameter>
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="connectionType">PAHO-MQTTv5</ActionParameter>
            <ApiParameter name="protocol">mqtt</ApiParameter>
            <include>../common/MQTT_server.xml</include>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="clientId">a:org4iot2:wildcardsub:TA</ApiParameter>  
            <ApiParameter name="cleanSession">true</ApiParameter>
            <ApiParameter name="topicAliasIn">10</ApiParameter>
            <ApiParameter name="sessionExpire">12</ApiParameter>
        </Action>
<!--
    MQTT receive 10 CONNECT: connect=32: len=83 
00044d51 5454 05 c2 0023 08 11 0000000c 22 000a 0019 613a6f 72673469 6f74323a 77696c64 63617264 7375623a 54410019 613a6f72 6734696f 74323a77 696c6463 61726473 75623a54 410008 
[..MQTT...#......"....a:org4iot2:wildcardsub:TA..a:org4iot2:wildcardsub:TA..]

0x22 TopicAliasMax at Client 000a

    MQTT receive 20 CONNACK connect=33 inprogress=1: len=17 
00 00 0b 21 0100 22 0008 27 00400000 8100 05 [...!.."..'.@.....]

0x22 TopicAliasMax at Server 0008
-->        
        <Action name="SubscribeWC" type="Subscribe">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="topic">iot-2/evt/publishPropertyTopicAlias/fmt/+</ApiParameter>
            <ApiParameter name="QoS">2</ApiParameter>
            <ApiParameter name="expectedrc">2</ApiParameter>
        </Action>

		
        <Action name="sync_TA_1" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA1</ActionParameter>
            <ActionParameter name="component_list">tTA1;rTA1;wTA1</ActionParameter>
            <ActionParameter name="timeout">20000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg1" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg1" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:1, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/1 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">1</ApiParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
<!--
    MQTT send 30 PUBLISH connect=32: len=198 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f31 03  23 0001  4d 73673a7b 20636c69 656e7449 643d643a 6f726734 696f7432  [t/1.#..Msg:{ clientId=d:org4iot2]
00096: 3a707562 50726f70 733a5441 6c696173 2c207265 7461696e 3a66616c 73652c20  [:pubProps:TAlias, retain:false, ]
00128: 746f7069 63416c69 61733a31 2c20516f 533a302c 20746f70 69633a69 6f742d32  [topicAlias:1, QoS:0, topic:iot-2]
00160: 2f657674 2f707562 6c697368 50726f70 65727479 546f7069 63416c69 61732f66  [/evt/publishPropertyTopicAlias/f]
00192: 6d742f31 207d                                                            [mt/1 }]

0x23 TopicAlias 0001
-->		
        <Action name="sync_TA_2" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA2</ActionParameter>
            <ActionParameter name="component_list">tTA2;rTA2;wTA2</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg2" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg2" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:2, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/2 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">2</ApiParameter>
            <ActionParameter name="compareQoS">1</ActionParameter>
        </Action>
<!--
    MQTT send 32 PUBLISH connect=32: len=200 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f32 0001 03  23 0002  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f  [t/2...#..Msg:{ clientId=d:org4io]
00096: 74323a70 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365  [t2:pubProps:TAlias, retain:false]
00128: 2c20746f 70696341 6c696173 3a322c20 516f533a 312c2074 6f706963 3a696f74  [, topicAlias:2, QoS:1, topic:iot]
00160: 2d322f65 76742f70 75626c69 73685072 6f706572 7479546f 70696341 6c696173  [-2/evt/publishPropertyTopicAlias]
00192: 2f666d74 2f32207d                                                        [/fmt/2 }] 

0x23 Topic Alias 0002
-->		
        <Action name="sync_TA_3" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA3</ActionParameter>
            <ActionParameter name="component_list">tTA3;rTA3;wTA3</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg3" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg3" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:3, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/3 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">3</ApiParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--
    MQTT send 34 PUBLISH connect=32: len=200 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f33 0002 03  23 0003  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f  [t/3...#..Msg:{ clientId=d:org4io]
00096: 74323a70 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365  [t2:pubProps:TAlias, retain:false]
00128: 2c20746f 70696341 6c696173 3a332c20 516f533a 322c2074 6f706963 3a696f74  [, topicAlias:3, QoS:2, topic:iot]
00160: 2d322f65 76742f70 75626c69 73685072 6f706572 7479546f 70696341 6c696173  [-2/evt/publishPropertyTopicAlias]
00192: 2f666d74 2f33207d                                                        [/fmt/3 }]

0x23 Topic Alias 0003
-->
		
        <Action name="sync_TA_4" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA4</ActionParameter>
            <ActionParameter name="component_list">tTA4;rTA4;wTA4</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg4" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg4" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:4, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/4 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">4</ApiParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
<!--
     MQTT send 30 PUBLISH connect=32: len=198 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f34 03  23 0004  4d 73673a7b 20636c69 656e7449 643d643a 6f726734 696f7432  [t/4.#..Msg:{ clientId=d:org4iot2]
00096: 3a707562 50726f70 733a5441 6c696173 2c207265 7461696e 3a66616c 73652c20  [:pubProps:TAlias, retain:false, ]
00128: 746f7069 63416c69 61733a34 2c20516f 533a302c 20746f70 69633a69 6f742d32  [topicAlias:4, QoS:0, topic:iot-2]
00160: 2f657674 2f707562 6c697368 50726f70 65727479 546f7069 63416c69 61732f66  [/evt/publishPropertyTopicAlias/f]
00192: 6d742f34 207d                                                            [mt/4 }]

0x23 Topic Alias 0004   (No PacketID since QoS 0)
-->
		
        <Action name="sync_TA_5" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA5</ActionParameter>
            <ActionParameter name="component_list">tTA5;rTA5;wTA5</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg5" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg5" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:5, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/5 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">5</ApiParameter>
            <ActionParameter name="compareQoS">1</ActionParameter>
        </Action>
<!--
    MQTT send 32 PUBLISH connect=32: len=200 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f35 0003 03  23 0005  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f  [t/5...#..Msg:{ clientId=d:org4io]
00096: 74323a70 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365  [t2:pubProps:TAlias, retain:false]
00128: 2c20746f 70696341 6c696173 3a352c20 516f533a 312c2074 6f706963 3a696f74  [, topicAlias:5, QoS:1, topic:iot]
00160: 2d322f65 76742f70 75626c69 73685072 6f706572 7479546f 70696341 6c696173  [-2/evt/publishPropertyTopicAlias]
00192: 2f666d74 2f35207d                                                        [/fmt/5 }]

0x23 Topic Alias 0005
-->        
		
        <Action name="sync_TA_6" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA6</ActionParameter>
            <ActionParameter name="component_list">tTA6;rTA6;wTA6</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg6" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg6" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:6, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/6 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">6</ApiParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--
    MQTT send 34 PUBLISH connect=32: len=200 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f36 0004 03  23 0006  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f  [t/6...#..Msg:{ clientId=d:org4io]
00096: 74323a70 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365  [t2:pubProps:TAlias, retain:false]
00128: 2c20746f 70696341 6c696173 3a362c20 516f533a 322c2074 6f706963 3a696f74  [, topicAlias:6, QoS:2, topic:iot]
00160: 2d322f65 76742f70 75626c69 73685072 6f706572 7479546f 70696341 6c696173  [-2/evt/publishPropertyTopicAlias]
00192: 2f666d74 2f36207d                                                        [/fmt/6 }]

0x23 TopicAlias 0006
-->
		
        <Action name="sync_TA_7" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA7</ActionParameter>
            <ActionParameter name="component_list">tTA7;rTA7;wTA7</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg7" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg7" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:7, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/7 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">7</ApiParameter>
            <ActionParameter name="compareQoS">0</ActionParameter>
        </Action>
<!--
    MQTT send 30 PUBLISH connect=32: len=198 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f37 03  23 0007  4d 73673a7b 20636c69 656e7449 643d643a 6f726734 696f7432  [t/7.#..Msg:{ clientId=d:org4iot2]
00096: 3a707562 50726f70 733a5441 6c696173 2c207265 7461696e 3a66616c 73652c20  [:pubProps:TAlias, retain:false, ]
00128: 746f7069 63416c69 61733a37 2c20516f 533a302c 20746f70 69633a69 6f742d32  [topicAlias:7, QoS:0, topic:iot-2]
00160: 2f657674 2f707562 6c697368 50726f70 65727479 546f7069 63416c69 61732f66  [/evt/publishPropertyTopicAlias/f]
00192: 6d742f37 207d                                                            [mt/7 }]

0x23 TopicAlias 0007
-->
		
        <Action name="sync_TA_8" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA8</ActionParameter>
            <ActionParameter name="component_list">tTA8;rTA8;wTA8</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg8" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg8" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:8, QoS:1, topic:iot-2/evt/publishPropertyTopicAlias/fmt/8 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">8</ApiParameter> 
            <ActionParameter name="compareQoS">1</ActionParameter>
        </Action>
<!--
    MQTT send 32 PUBLISH connect=32: len=200 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f38 0005  03  23 0008  4d7367 3a7b2063 6c69656e 7449643d 643a6f72 6734696f  [t/8...#..Msg:{ clientId=d:org4io]
00096: 74323a70 75625072 6f70733a 54416c69 61732c20 72657461 696e3a66 616c7365  [t2:pubProps:TAlias, retain:false]
00128: 2c20746f 70696341 6c696173 3a382c20 516f533a 312c2074 6f706963 3a696f74  [, topicAlias:8, QoS:1, topic:iot]
00160: 2d322f65 76742f70 75626c69 73685072 6f706572 7479546f 70696341 6c696173  [-2/evt/publishPropertyTopicAlias]
00192: 2f666d74 2f38207d                                                        [/fmt/8 }]

0x23 Topic Alias 0008
-->		
        <Action name="sync_TA_9" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA9</ActionParameter>
            <ActionParameter name="component_list">tTA9;rTA9;wTA9</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg9" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg9" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:9, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/9 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="hasTopicAlias">false</ApiParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--
    MQTT send 34 PUBLISH connect=32: len=197 
00000: 0041696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Aiot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f39 0006  00  4d73 673a7b20 636c6965 6e744964 3d643a6f 72673469 6f74323a  [t/9...Msg:{ clientId=d:org4iot2:]
00096: 70756250 726f7073 3a54416c 6961732c 20726574 61696e3a 66616c73 652c2074  [pubProps:TAlias, retain:false, t]
00128: 6f706963 416c6961 733a392c 20516f53 3a322c20 746f7069 633a696f 742d322f  [opicAlias:9, QoS:2, topic:iot-2/]
00160: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00192: 742f3920 7d                                                              [t/9 }]

No Properties, so NO Topic Alias expected.
-->
		
        <Action name="sync_TA_10" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA10</ActionParameter>
            <ActionParameter name="component_list">tTA10;rTA10;wTA10</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg10" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
        <Action name="CompareMsg10" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg 1 clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:10, QoS:2, topic:iot-2/evt/publishPropertyTopicAlias/fmt/10 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="hasTopicAlias">false</ApiParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--
    MQTT send 34 PUBLISH connect=32: len=200 
00000: 0042696f 742d322f 74797065 2f707562 50726f70 732f6964 2f54416c 6961732f  [.Biot-2/type/pubProps/id/TAlias/]
00032: 6576742f 7075626c 69736850 726f7065 72747954 6f706963 416c6961 732f666d  [evt/publishPropertyTopicAlias/fm]
00064: 742f3130 0007  00  4d73672031 20636c69 656e7449 643d643a 6f726734 696f7432  [t/10...Msg 1 clientId=d:org4iot2]
00096: 3a707562 50726f70 733a5441 6c696173 2c207265 7461696e 3a66616c 73652c20  [:pubProps:TAlias, retain:false, ]
00128: 746f7069 63416c69 61733a31 302c2051 6f533a32 2c20746f 7069633a 696f742d  [topicAlias:10, QoS:2, topic:iot-]
00160: 322f6576 742f7075 626c6973 6850726f 70657274 79546f70 6963416c 6961732f  [2/evt/publishPropertyTopicAlias/]
00192: 666d742f 3130207d                                                        [fmt/10 }]

No Properties, so NO Topic Alias expected.
-->		
        <Action name="sync_TA_11" type="SyncComponentAction"> 
            <ActionParameter name="component_name">wTA11</ActionParameter>
            <ActionParameter name="component_list">tTA11;rTA11;wTA11</ActionParameter>
            <ActionParameter name="timeout">2000</ActionParameter>
        </Action>

        <Action name="ReceiveMsg11" type="ReceiveMessage">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="waitTime">2000</ActionParameter>
        </Action>
		<!-- QoS on second publish was 2 , ignore static text in message body that says QoS:0  -->
        <Action name="CompareMsg11" type="CompareMessageData">
            <ActionParameter name="structure_id">rxmsg1</ActionParameter>
            <ActionParameter name="compareBody">Msg:{ clientId=d:org4iot2:pubProps:TAlias, retain:false, topicAlias:1, QoS:0, topic:iot-2/evt/publishPropertyTopicAlias/fmt/1 }</ActionParameter>
            <ActionParameter name="mqttMessageVersion">5</ActionParameter >
            <ApiParameter name="compareTopicAlias">1</ApiParameter>
            <ActionParameter name="compareQoS">2</ActionParameter>
        </Action>
<!--
    MQTT send 34 PUBLISH connect=32: len=135 
00000: 0000 0008  03 23 0001  4d73673a 7b20636c 69656e74 49643d64 3a6f7267 34696f74  [.....#..Msg:{ clientId=d:org4iot]
00032: 323a7075 6250726f 70733a54 416c6961 732c2072 65746169 6e3a6661 6c73652c  [2:pubProps:TAlias, retain:false,]
00064: 20746f70 6963416c 6961733a 312c2051 6f533a30 2c20746f 7069633a 696f742d  [ topicAlias:1, QoS:0, topic:iot-]
00096: 322f6576 742f7075 626c6973 6850726f 70657274 79546f70 6963416c 6961732f  [2/evt/publishPropertyTopicAlias/]
00128: 666d742f 31207d                                                          [fmt/1 }]

0x23 TopicAlias 0001, NOTE There is no leading TopicName length=0000
-->


        <Action name="CheckConnectAfterRecvs" type="CheckConnection">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ActionParameter name="isConnected">true</ActionParameter>
        </Action>    

        <Action name="CloseConnectionV5" type="CloseConnection">
            <ActionParameter name="connection_id">CFV5</ActionParameter>
            <ApiParameter name="sessionExpire">0</ApiParameter>
        </Action>    
    </Action>
 
    
</IsmWSTest>
                
