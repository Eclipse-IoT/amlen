<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 * Copyright (c) 2013-2021 Contributors to the Eclipse Foundation
 * 
 * See the NOTICE file(s) distributed with this work for additional
 * information regarding copyright ownership.
 * 
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0
 * 
 * SPDX-License-Identifier: EPL-2.0
 */

  TestCase Name: jms_ssl_001

  Test Category:  JMS SSL
  
  Test Description: Tests Endpoint 1
    Test that attempting to create an SSL connection to an insecure
    port (16102) fails. Test that we can send and receive messages across
    an SSL connection using a self-signed server certificate.

    Component 2 Tests the white star unicode character

    Connection Policies:
    JMSSSLConnectionPolicy1 - Allows ClientID jms* to connect.
	☆CP - Allows anything to connect over JMS protocol
    
    Messaging Policies:
    JMSSSLMessagingPolicy01  - Allows publish and subscribe to dest1 using JMS
    JMSSSLMessagingPolicy02  - Allows publish to dest2
    JMSSSLMessagingPolicy03  - Allows subscribe to dest3
    JMSSSLMessagingPolicy04  - Allows publish and subscribe to dest4 using MQTT
    JMSSSLMessagingPolicy05  - Allows UserID=JMSUser2 GroupID=JMSGroup1 to 
                               publish and subscribe to dest5.
                               (NOTE: UserID, GroupID are an AND condition.
                                JMSUser2 must be a member of JMSGroup1.) 
	☆MP - Allows UserID=☆ GroupID=☆to publish and subscribe to any destination

    Endpoints:
    JMSSSLEndpoint1 - Port 18466
	☆EP  - Port 18456
	JMSNoTLSEndpoint1 - Port 28466
-->
<ImaJmsTest name="jms_ssl_001">
	<Action name="Component1" type="CompositeAction">
		<Action name="setTraceLevelHigh" type="RestAPI">
	        <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
	        <ActionParameter name="path">/ima/v1/configuration</ActionParameter>
	        <ActionParameter name="action">POST</ActionParameter>
	        <ActionParameter name="payload">{"TraceLevel":"9"}</ActionParameter>
	        <ActionParameter name="printResult">true</ActionParameter>
	        <ActionParameter name="expectedStatusCode">200</ActionParameter>
	        <ActionParameter name="expectedMessageCode"></ActionParameter>
	    </Action>
	
		<Action name="Create_cf1" type="CreateConnectionFactory">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<!--ActionParameter name="loglevel">9</ActionParameter>
			<ActionParameter name="logfile">stdout</ActionParameter-->
			<ActionParameter name="keyStore">../common/ibm.jks</ActionParameter>
			<ActionParameter name="keyStorePassword">password</ActionParameter>
		</Action>
		
		<Action name="SetPropsFail_cf1" type="FillIsmProps">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<ActionParameter name="validateAll">true</ActionParameter>
			<ActionParameter name="validateNoWarn">false</ActionParameter>
			<ImaProperty name="Protocol" value="tcps"/>
			<ImaProperty name="ClientID" value="jmsClient"/>
			<include>../common/JMS_server.xml</include>
			<ImaProperty name="Port" value="16102"/>
		</Action>
		
		<!-- Fails because we are trying to connect using SSL to the demo endpoint,
		     which does not allow SSL -->
		<Action name="CreateConnectionFail_cf1" type="CreateConnection" rc="1" reason="CWLNC0022">
			<ActionParameter name="structure_id">connection_cf1</ActionParameter>
			<ApiParameter name="user">JMSUser1</ApiParameter>
			<ApiParameter name="passwd">test</ApiParameter>
		 	<ActionParameter name="factory_id">cf1</ActionParameter>
		</Action>
		
		<Action name="SetProps_cf1" type="FillIsmProps">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<ActionParameter name="validateAll">true</ActionParameter>
			<ActionParameter name="validateNoWarn">false</ActionParameter>
			<ImaProperty name="Protocol" value="tcps"/>
			<include>../common/JMS_server.xml</include>
			<ImaProperty name="Port" value="18466"/>
		</Action>
		
		<!-- Connect is allowed because we allow JMS connections with ClientID=jms* -->
		<Action name="CreateConnection_cf1" type="CreateConnection">
			<ActionParameter name="structure_id">connection_cf1</ActionParameter>
			<ApiParameter name="user">JMSUser1</ApiParameter>
			<ApiParameter name="passwd">test</ApiParameter>
		 	<ActionParameter name="factory_id">cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession1_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session1_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession2_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session2_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession3_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session3_cf1</ActionParameter>
		</Action>

		<Action name="Create_dest1" type="CreateDestination">
			<ActionParameter name="structure_id">dest1</ActionParameter>
			<ActionParameter name="type">topic</ActionParameter>
			<ApiParameter name="name">dest1</ApiParameter>
		</Action>

		<Action name="Create_dest5" type="CreateDestination">
			<ActionParameter name="structure_id">dest5</ActionParameter>
			<ActionParameter name="type">topic</ActionParameter>
			<ApiParameter name="name">dest5</ApiParameter>
		</Action>

		<!-- Create consumer on dest5.
		     This will fail because JMSSSLMessagingPolicy 5 only allows user 
		     JMSUser2 to subscribe to dest5. -->
		<Action name="CreateConsumer1_dest5" type="CreateConsumer" rc="1" reason="CWLNC0207">
			<ActionParameter name="structure_id">consumer1_dest5</ActionParameter>
			<ActionParameter name="dest_id">dest5</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
		</Action>

		<!-- Create producer on dest5.
		     This will fail because JMSSSLMessagingPolicy 5 only allows user 
		     JMSUser2 to publish to dest5. -->
		<Action name="CreateProducer1_dest5" type="CreateProducer" rc="1" reason="CWLNC0207">
			<ActionParameter name="structure_id">producer1_dest5</ActionParameter>
			<ActionParameter name="dest_id">dest5</ActionParameter>
			<ActionParameter name="session_id">session2_cf1</ActionParameter>
		</Action>
		
		<!-- Create consumer on dest1.
		     This will succeed because JMSSSLMessagingPolicy 1 allows subscribe
		     to dest1. -->
		<Action name="CreateConsumer1_dest1" type="CreateConsumer">
			<ActionParameter name="structure_id">consumer1_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateConsumer2_dest1" type="CreateConsumer">
			<ActionParameter name="structure_id">consumer2_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session2_cf1</ActionParameter>
		</Action>

		<!-- Create producer on dest1.
		     This will succeed because JMSSSLMessagingPolicy 1 allows publish
		     to dest1. -->
		<Action name="CreateProducer1_dest1" type="CreateProducer">
			<ActionParameter name="structure_id">producer1_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session3_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateMsgListener_consumer1" type="CreateMessageListener">
			<ActionParameter name="structure_id">msg_listener_consumer1</ActionParameter>
		</Action>
		
		<Action name="SetMsgListener_consumer1" type="SetMessageListener">
			<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
			<ActionParameter name="consumer_id">consumer1_dest1</ActionParameter>
		</Action>

		<Action name="StartConnection_cf1" type="StartConnection">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		</Action>
	
		<Action name="rmdt" type="CompositeAction">
			<!-- PRODUCER -->
			<!-- PRODUCER: Create messages -->
			<Action name="CreateBytesMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_bytes_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">BYTES</ApiParameter>
			</Action>
	
			<Action name="CreateMapMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_map_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">MAP</ApiParameter>
			</Action>		
	
			<Action name="CreateObjMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_obj_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">OBJECT</ApiParameter>
			</Action>		
	
			<Action name="CreateStreamMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_strm_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">STREAM</ApiParameter>
			</Action>
					
			<Action name="CreateTxtMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_txt_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">TEXT</ApiParameter>
			</Action>
	
			<Action name="CreateEmptyBytesMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_bytes_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">BYTES</ApiParameter>
			</Action>
			
			<Action name="CreateEmptyMapMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_map_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">MAP</ApiParameter>
			</Action>
	
			<Action name="CreateEmptyObjectMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_obj_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">OBJECT</ApiParameter>
			</Action>
			
			<Action name="CreateEmptyTxtMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_txt_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">TEXT</ApiParameter>
			</Action>
	
			<Action name="CreateEmptyMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
			</Action>
			
			<!-- PRODUCER: Set message content -->				
			<Action name="WriteBytesMessage_ses3_dest1" type="WriteBytesMessage">
				<ActionParameter name="message_id">tx_bytes_msg1</ActionParameter>
				<ApiParameter name="valueType">UTF8</ApiParameter>
				<ApiParameter name="value">BYTES: test content 1</ApiParameter>
			</Action>
		
			<Action name="SetMapItem1_ses3_dest1" type="SetMessageMapItem">
				<ActionParameter name="message_id">tx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent1</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ApiParameter name="value">MAP: test content 1</ApiParameter>
			</Action>
			
			<Action name="SetMapItem2_ses3_dest1" type="SetMessageMapItem">
				<ActionParameter name="message_id">tx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent2</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ApiParameter name="value">MAP: test content 2</ApiParameter>
			</Action>
	
			<Action name="SetObjMsg_ses3_dest1" type="SetMessageObject">
				<ActionParameter name="message_id">tx_obj_msg1</ActionParameter>
				<ActionParameter name="objValueType">String</ActionParameter>
				<ApiParameter name="value">OBJECT: test content 1</ApiParameter>
			</Action>
	
			<Action name="WriteStreamMessage_ses3_dest1" type="WriteStreamMessage">
				<ActionParameter name="message_id">tx_strm_msg1</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ApiParameter name="value">STREAM: test content 1</ApiParameter>
			</Action>
	
			<Action name="SetTxtMsg_ses3_dest1" type="SetMessageText">
				<ActionParameter name="message_id">tx_txt_msg1</ActionParameter>
				<ApiParameter name="value">TEXT: test content 1</ApiParameter>
			</Action>
	
			<!-- NOTE: No content set for "empty" messages -->
			
			<!-- PRODUCER: Send messages -->
			<Action name="SendBytesMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_bytes_msg1</ActionParameter>
			</Action>
			
			<Action name="SendMapMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_map_msg1</ActionParameter>
			</Action>
	
			<Action name="SendObjMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_obj_msg1</ActionParameter>
			</Action>
	
			<Action name="SendStreamMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_strm_msg1</ActionParameter>
			</Action>
			
			<Action name="SendTxtMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_txt_msg1</ActionParameter>
			</Action>
	
			<Action name="SendEmptyBytesMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_bytes_msgEmpty</ActionParameter>
			</Action>
	
			<Action name="SendEmptyMapMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_map_msgEmpty</ActionParameter>
			</Action>
			
			<Action name="SendEmptyObjectMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_obj_msgEmpty</ActionParameter>
			</Action>
	
			<Action name="SendEmptyTextMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_txt_msgEmpty</ActionParameter>
			</Action>
	
			<Action name="SendEmptyMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_msgEmpty</ActionParameter>
			</Action>
		</Action>
	
		<Action name="rmdr1" type="CompositeAction">
			<!-- CONSUMER 1: Receive messages -->
			<Action name="RcvBytesMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvMapMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvObjMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvStreamMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_strm_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvTxtMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyBytesMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyMapMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyObjectMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyTextMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<!-- CONSUMER 1: Extract message content and verify it -->
			<Action name="ReadBytesMsg_consumer1" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msg1</ActionParameter>
				<ApiParameter name="valueType">UTF8</ApiParameter>
				<ActionParameter name="verifyValue">BYTES: test content 1</ActionParameter>
			</Action>
	
			<Action name="GetMapItem1_consumer1" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent1</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 1</ActionParameter>
			</Action>
			
			<Action name="GetMapItem2_consumer1" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent2</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 2</ActionParameter>
			</Action>
	
			<Action name="GetObjMsg_consumer1" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msg1</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">OBJECT: test content 1</ActionParameter>
			</Action>
			
			<Action name="ReadStreamMsg_consumer1" type="ReadStreamMessage">
				<ActionParameter name="message_id">rx_strm_msg1</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">STREAM: test content 1</ActionParameter>
			</Action>
			
			<Action name="GetMsgText_consumer1" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msg1</ActionParameter>
				<ActionParameter name="verifyValue">TEXT: test content 1</ActionParameter>
			</Action>
			
			<Action name="ReadEmptyBytesMsg_consumer1" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msgEmpty</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetMapItemEmpty_consumer1" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msgEmpty</ActionParameter>
				<ApiParameter name="propertyName">MessageContentEmpty</ApiParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
			
			<Action name="GetEmptyObjectMsg_consumer1" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msgEmpty</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetEmptyTextMsg_consumer1" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msgEmpty</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
		</Action>
		
		<Action name="rmdr2" type="CompositeAction">	
			<!-- CONSUMER 2: Receive messages -->
			<Action name="RcvBytesMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvMapMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvObjMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvStreamMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_strm_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvTxtMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyBytesMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyMapMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyObjectMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyTextMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<!-- CONSUMER 2: Extract message content and verify it -->
			<Action name="ReadBytesMsg_consumer2" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msg2</ActionParameter>
				<ApiParameter name="valueType">UTF8</ApiParameter>
				<ActionParameter name="verifyValue">BYTES: test content 1</ActionParameter>
			</Action>
	
			<Action name="GetMapItem1_consumer2" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg2</ActionParameter>
				<ApiParameter name="propertyName">MessageContent1</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 1</ActionParameter>
			</Action>
			
			<Action name="GetMapItem2_consumer2" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg2</ActionParameter>
				<ApiParameter name="propertyName">MessageContent2</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 2</ActionParameter>
			</Action>
	
			<Action name="GetObjMsg_consumer2" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msg2</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">OBJECT: test content 1</ActionParameter>
			</Action>
	
			<Action name="ReadStreamMsg_consumer2" type="ReadStreamMessage">
				<ActionParameter name="message_id">rx_strm_msg2</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">STREAM: test content 1</ActionParameter>
			</Action>
	
			<Action name="GetMsgText_consumer2" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msg2</ActionParameter>
				<ActionParameter name="verifyValue">TEXT: test content 1</ActionParameter>
			</Action>
			
			<Action name="ReadEmptyBytesMsg_consumer2" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msgEmpty2</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
			
			<Action name="GetMapItemEmpty_consumer2" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msgEmpty2</ActionParameter>
				<ApiParameter name="propertyName">MessageContentEmpty</ApiParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetEmptyObjectMsg_consumer2" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msgEmpty2</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetEmptyTextMsg_consumer2" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msgEmpty2</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
		</Action>
	
		<Action name="CloseConnection_cf1" type="CloseConnection">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		</Action>
	</Action>

	<Action name="Component2" type="CompositeAction">
		<Action name="Create_cf1" type="CreateConnectionFactory">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<!--ActionParameter name="loglevel">9</ActionParameter>
			<ActionParameter name="logfile">stdout</ActionParameter-->
		</Action>
		
		<Action name="SetProps_cf1" type="FillIsmProps">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<ActionParameter name="validateAll">true</ActionParameter>
			<ActionParameter name="validateNoWarn">false</ActionParameter>
			<ImaProperty name="Protocol" value="tcp"/>
			<ImaProperty name="ClientID" value="☆Client"/>
			<include>../common/JMS_server.xml</include>
			<ImaProperty name="Port" value="18456"/>
		</Action>
		
		<Action name="CreateConnection_cf1" type="CreateConnection">
			<ActionParameter name="structure_id">connection_cf1</ActionParameter>
			<ApiParameter name="user">☆</ApiParameter>
			<ApiParameter name="passwd">test</ApiParameter>
		 	<ActionParameter name="factory_id">cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession1_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session1_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession2_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session2_cf1</ActionParameter>
		</Action>
		
		<Action name="Create_dest1" type="CreateDestination">
			<ActionParameter name="structure_id">dest1</ActionParameter>
			<ActionParameter name="type">topic</ActionParameter>
			<ApiParameter name="name">☆Topic</ApiParameter>
		</Action>

		<Action name="CreateConsumer1_dest1" type="CreateConsumer">
			<ActionParameter name="structure_id">consumer1_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session2_cf1</ActionParameter>
		</Action>

		<Action name="CreateProducer1_dest1" type="CreateProducer">
			<ActionParameter name="structure_id">producer1_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateMessage1" type="CreateMessage">
			<ActionParameter name="structure_id">txmsg1</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
			<ApiParameter name="msgType">BYTES</ApiParameter>
		</Action>

		<Action name="SetMessage1Text" type="SetMessageText">
			<ActionParameter name="message_id">txmsg1</ActionParameter>
			<ApiParameter name="value">This is a test string message</ApiParameter>
		</Action>

		<Action name="CreateMessage2" type="CreateMessage">
			<ActionParameter name="structure_id">txmsg2</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
			<ApiParameter name="msgType">TEXT</ApiParameter>
			<ApiParameter name="msgParam">&lt;quote&gt;&lt;symbol&gt;IBM&lt;/symbol&gt;&lt;bid&gt;100.00&lt;/bid&gt;&lt;ask&gt;105.20&lt;/ask&gt;&lt;/quote&gt;</ApiParameter>
		</Action>

		<Action name="CreateMessage3" type="CreateMessage">
			<ActionParameter name="structure_id">txmsg3</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
			<ApiParameter name="msgType">BYTES</ApiParameter>
		</Action>

		<Action name="SetMessage3Text" type="SetMessageText">
			<ActionParameter name="message_id">txmsg3</ActionParameter>
			<ApiParameter name="value">symbol=MSFT|bid=27.09|ask=30.19</ApiParameter>
		</Action>

		<Action name="CompositeSnd" type="CompositeAction" repeat="90" interval="0" repeat_interval="0"> 
			<Action name="SendMessage1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">txmsg1</ActionParameter>
			</Action>

			<Action name="SendMessage2" type="SendMessage">
				<dependsOn name="SendMessage1" interval="0"/>
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">txmsg2</ActionParameter>
			</Action>

			<Action name="SendMessage3" type="SendMessage">
				<dependsOn name="SendMessage2" interval="0"/>
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">txmsg3</ActionParameter>
			</Action>
		</Action>

		<Action name="StartConnection_RX1" type="StartConnection">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		</Action>
	
		<Action name="CompositeRcv" type="CompositeAction" expected="90" interval="0" repeat_interval="0"> 
			<Action name="ReceiveMessage1-1" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer1_dest1</ActionParameter>
				<ActionParameter name="structure_id">rxmsg1</ActionParameter>
				<ApiParameter name="timeout">5000</ApiParameter>
			</Action>

			<Action name="GetMessageBytes" type="GetMessageText">
				<dependsOn name="ReceiveMessage1-1" interval="0"/>
				<ActionParameter name="message_id">rxmsg1</ActionParameter>
				<ActionParameter name="verifyValue">This is a test string message</ActionParameter>
			</Action>

			<Action name="ReceiveMessage2" type="ReceiveMessage">
				<dependsOn name="GetMessageBytes" interval="0"/>
				<ActionParameter name="consumer_id">consumer1_dest1</ActionParameter>
				<ActionParameter name="structure_id">rxmsg1</ActionParameter>
				<ApiParameter name="timeout">5000</ApiParameter>
			</Action>

			<Action name="GetMessageText2" type="GetMessageText">
				<dependsOn name="ReceiveMessage2" interval="0"/>
				<ActionParameter name="message_id">rxmsg1</ActionParameter>
				<ActionParameter name="verifyValue">&lt;quote&gt;&lt;symbol&gt;IBM&lt;/symbol&gt;&lt;bid&gt;100.00&lt;/bid&gt;&lt;ask&gt;105.20&lt;/ask&gt;&lt;/quote&gt;</ActionParameter>
			</Action>

			<Action name="ReceiveMessage3" type="ReceiveMessage">
				<dependsOn name="GetMessageText2" interval="0"/>
				<ActionParameter name="consumer_id">consumer1_dest1</ActionParameter>
				<ActionParameter name="structure_id">rxmsg1</ActionParameter>
				<ApiParameter name="timeout">5000</ApiParameter>
			</Action>

			<Action name="GetMessageBytes3" type="GetMessageText">
				<dependsOn name="ReceiveMessage3" interval="0"/>
				<ActionParameter name="message_id">rxmsg1</ActionParameter>
				<ActionParameter name="verifyValue">symbol=MSFT|bid=27.09|ask=30.19</ActionParameter>
			</Action>
		</Action>

		<Action name="CloseConnection_cf1" type="CloseConnection">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		</Action>
	</Action>
	
	<!-- Test Endpoint with non-TLS security profile -->
	<Action name="Component3" type="CompositeAction">
		<Action name="Create_cf1" type="CreateConnectionFactory">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<!--ActionParameter name="loglevel">9</ActionParameter>
			<ActionParameter name="logfile">stdout</ActionParameter-->
			<ActionParameter name="keyStore">../common/ibm.jks</ActionParameter>
			<ActionParameter name="keyStorePassword">password</ActionParameter>
		</Action>
		
		<Action name="SetProps_cf1" type="FillIsmProps">
			<ActionParameter name="structure_id">cf1</ActionParameter>
			<ActionParameter name="validateAll">true</ActionParameter>
			<ActionParameter name="validateNoWarn">false</ActionParameter>
			<ImaProperty name="Protocol" value="tcp"/>
			<ImaProperty name="ClientID" value="jmsClient"/>
			<include>../common/JMS_server.xml</include>
			<ImaProperty name="Port" value="28466"/>
		</Action>
		
		<Action name="CreateConnection_cf1" type="CreateConnection">
			<ActionParameter name="structure_id">connection_cf1</ActionParameter>
			<ApiParameter name="user">JMSUser1</ApiParameter>
			<ApiParameter name="passwd">test</ApiParameter>
		 	<ActionParameter name="factory_id">cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession1_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session1_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession2_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session2_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateSession3_conn_cf1" type="CreateSession">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		 	<ActionParameter name="structure_id">session3_cf1</ActionParameter>
		</Action>

		<Action name="Create_dest1" type="CreateDestination">
			<ActionParameter name="structure_id">dest1</ActionParameter>
			<ActionParameter name="type">topic</ActionParameter>
			<ApiParameter name="name">dest1</ApiParameter>
		</Action>

		<Action name="Create_dest5" type="CreateDestination">
			<ActionParameter name="structure_id">dest5</ActionParameter>
			<ActionParameter name="type">topic</ActionParameter>
			<ApiParameter name="name">dest5</ApiParameter>
		</Action>

		<!-- Create consumer on dest5.
		     This will fail because JMSSSLMessagingPolicy 5 only allows user 
		     JMSUser2 to subscribe to dest5. -->
		<Action name="CreateConsumer1_dest5" type="CreateConsumer" rc="1" reason="CWLNC0207">
			<ActionParameter name="structure_id">consumer1_dest5</ActionParameter>
			<ActionParameter name="dest_id">dest5</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
		</Action>

		<!-- Create producer on dest5.
		     This will fail because JMSSSLMessagingPolicy 5 only allows user 
		     JMSUser2 to publish to dest5. -->
		<Action name="CreateProducer1_dest5" type="CreateProducer" rc="1" reason="CWLNC0207">
			<ActionParameter name="structure_id">producer1_dest5</ActionParameter>
			<ActionParameter name="dest_id">dest5</ActionParameter>
			<ActionParameter name="session_id">session2_cf1</ActionParameter>
		</Action>
		
		<!-- Create consumer on dest1.
		     This will succeed because JMSSSLMessagingPolicy 1 allows subscribe
		     to dest1. -->
		<Action name="CreateConsumer1_dest1" type="CreateConsumer">
			<ActionParameter name="structure_id">consumer1_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session1_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateConsumer2_dest1" type="CreateConsumer">
			<ActionParameter name="structure_id">consumer2_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session2_cf1</ActionParameter>
		</Action>

		<!-- Create producer on dest1.
		     This will succeed because JMSSSLMessagingPolicy 1 allows publish
		     to dest1. -->
		<Action name="CreateProducer1_dest1" type="CreateProducer">
			<ActionParameter name="structure_id">producer1_dest1</ActionParameter>
			<ActionParameter name="dest_id">dest1</ActionParameter>
			<ActionParameter name="session_id">session3_cf1</ActionParameter>
		</Action>
		
		<Action name="CreateMsgListener_consumer1" type="CreateMessageListener">
			<ActionParameter name="structure_id">msg_listener_consumer1</ActionParameter>
		</Action>
		
		<Action name="SetMsgListener_consumer1" type="SetMessageListener">
			<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
			<ActionParameter name="consumer_id">consumer1_dest1</ActionParameter>
		</Action>

		<Action name="StartConnection_cf1" type="StartConnection">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		</Action>
	
		<Action name="rmdt" type="CompositeAction">
			<!-- PRODUCER -->
			<!-- PRODUCER: Create messages -->
			<Action name="CreateBytesMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_bytes_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">BYTES</ApiParameter>
			</Action>
	
			<Action name="CreateMapMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_map_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">MAP</ApiParameter>
			</Action>		
	
			<Action name="CreateObjMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_obj_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">OBJECT</ApiParameter>
			</Action>		
	
			<Action name="CreateStreamMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_strm_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">STREAM</ApiParameter>
			</Action>
					
			<Action name="CreateTxtMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_txt_msg1</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">TEXT</ApiParameter>
			</Action>
	
			<Action name="CreateEmptyBytesMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_bytes_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">BYTES</ApiParameter>
			</Action>
			
			<Action name="CreateEmptyMapMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_map_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">MAP</ApiParameter>
			</Action>
	
			<Action name="CreateEmptyObjectMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_obj_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">OBJECT</ApiParameter>
			</Action>
			
			<Action name="CreateEmptyTxtMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_txt_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
				<ApiParameter name="msgType">TEXT</ApiParameter>
			</Action>
	
			<Action name="CreateEmptyMessage_ses3_dest1" type="CreateMessage">
				<ActionParameter name="structure_id">tx_msgEmpty</ActionParameter>
				<ActionParameter name="session_id">session3_cf1</ActionParameter>
			</Action>
			
			<!-- PRODUCER: Set message content -->				
			<Action name="WriteBytesMessage_ses3_dest1" type="WriteBytesMessage">
				<ActionParameter name="message_id">tx_bytes_msg1</ActionParameter>
				<ApiParameter name="valueType">UTF8</ApiParameter>
				<ApiParameter name="value">BYTES: test content 1</ApiParameter>
			</Action>
		
			<Action name="SetMapItem1_ses3_dest1" type="SetMessageMapItem">
				<ActionParameter name="message_id">tx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent1</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ApiParameter name="value">MAP: test content 1</ApiParameter>
			</Action>
			
			<Action name="SetMapItem2_ses3_dest1" type="SetMessageMapItem">
				<ActionParameter name="message_id">tx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent2</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ApiParameter name="value">MAP: test content 2</ApiParameter>
			</Action>
	
			<Action name="SetObjMsg_ses3_dest1" type="SetMessageObject">
				<ActionParameter name="message_id">tx_obj_msg1</ActionParameter>
				<ActionParameter name="objValueType">String</ActionParameter>
				<ApiParameter name="value">OBJECT: test content 1</ApiParameter>
			</Action>
	
			<Action name="WriteStreamMessage_ses3_dest1" type="WriteStreamMessage">
				<ActionParameter name="message_id">tx_strm_msg1</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ApiParameter name="value">STREAM: test content 1</ApiParameter>
			</Action>
	
			<Action name="SetTxtMsg_ses3_dest1" type="SetMessageText">
				<ActionParameter name="message_id">tx_txt_msg1</ActionParameter>
				<ApiParameter name="value">TEXT: test content 1</ApiParameter>
			</Action>
	
			<!-- NOTE: No content set for "empty" messages -->
			
			<!-- PRODUCER: Send messages -->
			<Action name="SendBytesMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_bytes_msg1</ActionParameter>
			</Action>
			
			<Action name="SendMapMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_map_msg1</ActionParameter>
			</Action>
	
			<Action name="SendObjMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_obj_msg1</ActionParameter>
			</Action>
	
			<Action name="SendStreamMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_strm_msg1</ActionParameter>
			</Action>
			
			<Action name="SendTxtMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_txt_msg1</ActionParameter>
			</Action>
	
			<Action name="SendEmptyBytesMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_bytes_msgEmpty</ActionParameter>
			</Action>
	
			<Action name="SendEmptyMapMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_map_msgEmpty</ActionParameter>
			</Action>
			
			<Action name="SendEmptyObjectMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_obj_msgEmpty</ActionParameter>
			</Action>
	
			<Action name="SendEmptyTextMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_txt_msgEmpty</ActionParameter>
			</Action>
	
			<Action name="SendEmptyMessage_ses3_dest1" type="SendMessage">
				<ActionParameter name="producer_id">producer1_dest1</ActionParameter>
				<ActionParameter name="message_id">tx_msgEmpty</ActionParameter>
			</Action>
		</Action>
	
		<Action name="rmdr1" type="CompositeAction">
			<!-- CONSUMER 1: Receive messages -->
			<Action name="RcvBytesMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvMapMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvObjMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvStreamMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_strm_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvTxtMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msg1</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyBytesMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyMapMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyObjectMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyTextMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyMessage_consumer1" type="ReceiveMessage">
				<ActionParameter name="listener_id">msg_listener_consumer1</ActionParameter>
				<ActionParameter name="structure_id">rx_msgEmpty</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<!-- CONSUMER 1: Extract message content and verify it -->
			<Action name="ReadBytesMsg_consumer1" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msg1</ActionParameter>
				<ApiParameter name="valueType">UTF8</ApiParameter>
				<ActionParameter name="verifyValue">BYTES: test content 1</ActionParameter>
			</Action>
	
			<Action name="GetMapItem1_consumer1" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent1</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 1</ActionParameter>
			</Action>
			
			<Action name="GetMapItem2_consumer1" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg1</ActionParameter>
				<ApiParameter name="propertyName">MessageContent2</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 2</ActionParameter>
			</Action>
	
			<Action name="GetObjMsg_consumer1" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msg1</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">OBJECT: test content 1</ActionParameter>
			</Action>
			
			<Action name="ReadStreamMsg_consumer1" type="ReadStreamMessage">
				<ActionParameter name="message_id">rx_strm_msg1</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">STREAM: test content 1</ActionParameter>
			</Action>
			
			<Action name="GetMsgText_consumer1" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msg1</ActionParameter>
				<ActionParameter name="verifyValue">TEXT: test content 1</ActionParameter>
			</Action>
			
			<Action name="ReadEmptyBytesMsg_consumer1" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msgEmpty</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetMapItemEmpty_consumer1" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msgEmpty</ActionParameter>
				<ApiParameter name="propertyName">MessageContentEmpty</ApiParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
			
			<Action name="GetEmptyObjectMsg_consumer1" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msgEmpty</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetEmptyTextMsg_consumer1" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msgEmpty</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
		</Action>
		
		<Action name="rmdr2" type="CompositeAction">	
			<!-- CONSUMER 2: Receive messages -->
			<Action name="RcvBytesMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvMapMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvObjMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvStreamMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_strm_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvTxtMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msg2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyBytesMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_bytes_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyMapMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_map_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyObjectMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_obj_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
			
			<Action name="RcvEmptyTextMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_txt_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<Action name="RcvEmptyMessage_consumer2" type="ReceiveMessage">
				<ActionParameter name="consumer_id">consumer2_dest1</ActionParameter>
				<ActionParameter name="structure_id">rx_msgEmpty2</ActionParameter>
				<ApiParameter name="timeout">60000</ApiParameter>
			</Action>
	
			<!-- CONSUMER 2: Extract message content and verify it -->
			<Action name="ReadBytesMsg_consumer2" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msg2</ActionParameter>
				<ApiParameter name="valueType">UTF8</ApiParameter>
				<ActionParameter name="verifyValue">BYTES: test content 1</ActionParameter>
			</Action>
	
			<Action name="GetMapItem1_consumer2" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg2</ActionParameter>
				<ApiParameter name="propertyName">MessageContent1</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 1</ActionParameter>
			</Action>
			
			<Action name="GetMapItem2_consumer2" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msg2</ActionParameter>
				<ApiParameter name="propertyName">MessageContent2</ApiParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">MAP: test content 2</ActionParameter>
			</Action>
	
			<Action name="GetObjMsg_consumer2" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msg2</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">OBJECT: test content 1</ActionParameter>
			</Action>
	
			<Action name="ReadStreamMsg_consumer2" type="ReadStreamMessage">
				<ActionParameter name="message_id">rx_strm_msg2</ActionParameter>
				<ApiParameter name="valueType">String</ApiParameter>
				<ActionParameter name="verifyValue">STREAM: test content 1</ActionParameter>
			</Action>
	
			<Action name="GetMsgText_consumer2" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msg2</ActionParameter>
				<ActionParameter name="verifyValue">TEXT: test content 1</ActionParameter>
			</Action>
			
			<Action name="ReadEmptyBytesMsg_consumer2" type="ReadBytesMessage">
				<ActionParameter name="message_id">rx_bytes_msgEmpty2</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
			
			<Action name="GetMapItemEmpty_consumer2" type="GetMessageMapItem">
				<ActionParameter name="message_id">rx_map_msgEmpty2</ActionParameter>
				<ApiParameter name="propertyName">MessageContentEmpty</ApiParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetEmptyObjectMsg_consumer2" type="GetMessageObject">
				<ActionParameter name="message_id">rx_obj_msgEmpty2</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
	
			<Action name="GetEmptyTextMsg_consumer2" type="GetMessageText">
				<ActionParameter name="message_id">rx_txt_msgEmpty2</ActionParameter>
				<ActionParameter name="verifyValue"></ActionParameter>
			</Action>
		</Action>
	
		<Action name="CloseConnection_cf1" type="CloseConnection">
			<ActionParameter name="conn_id">connection_cf1</ActionParameter>
		</Action>
	</Action>
</ImaJmsTest>
