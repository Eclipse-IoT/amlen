<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 * Copyright (c) 2015-2021 Contributors to the Eclipse Foundation
 * 
 * See the NOTICE file(s) distributed with this work for additional
 * information regarding copyright ownership.
 * 
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0
 * 
 * SPDX-License-Identifier: EPL-2.0
 */
-->
<IsmWSTest name="testmqtt_clusterCM_001" >
    <!--

    -->

    <Action name="prepare" type="CompositeAction">

        <Action name="StatServerA1_start" type="RestAPI">
            <ActionParameter name="structureID">stat_server_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Server</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="StatServerA2_start" type="RestAPI">
            <ActionParameter name="structureID">stat_server_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Server</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="MonitorServerA1_start" type="RestAPI">
            <ActionParameter name="structureID">mon_server_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/service/status</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="MonitorServerA2_start" type="RestAPI">
            <ActionParameter name="structureID">mon_server_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/service/status</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- Clean up any old subs hanging around  and create new Sub -->
        <Action name="CreateConnection_cleanM2" type="CreateConnection">
            <ActionParameter name="structure_id">Con3</ActionParameter>
            <ActionParameter name="connection_id">CF3</ActionParameter>
            <include>../common/ConnectionType.xml</include>
            <include>../common/MQTT_server2.xml</include>
            <ApiParameter name="clientId">CM_001_subM2</ApiParameter>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="cleanSession">true</ApiParameter>
        </Action>

        <Action name="CloseConnection_cleanM2" type="CloseConnection">
            <ActionParameter name="connection_id">CF3</ActionParameter>
        </Action>
        <Action name="CreateConnectionM2" type="CreateConnection">
            <ActionParameter name="structure_id">Con3</ActionParameter>
            <ActionParameter name="connection_id">CF3</ActionParameter>
            <include>../common/ConnectionType.xml</include>
            <include>../common/MQTT_server2.xml</include>
            <ApiParameter name="clientId">CM_001_subM2</ApiParameter>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="cleanSession">false</ApiParameter>
        </Action>

        <Action name="StatCluster_onA1" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="server">``A1_IPv4_1``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compareClusterA1HOST" type="CompareClusterStats">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="serverName">``A2_IPv4_HOSTNAME_1``</ActionParameter>
            <ObjectProperty name="Status" value="Active"/>
            <ObjectProperty name="Health" value="Green"/>
            <ObjectProperty name="Memory" value="0"/>
            <ObjectProperty name="HAStatus" value="None"/>
        </Action>

        <Action name="SubscribeM2_QOS0" type="Subscribe">
            <ActionParameter name="connection_id">CF3</ActionParameter>
            <ApiParameter name="topic">/CM/001/A0</ApiParameter>
            <ApiParameter name="QoS">0</ApiParameter>
        </Action>

        <Action name="SubscribeM2_QOS1" type="Subscribe">
            <ActionParameter name="connection_id">CF3</ActionParameter>
            <ApiParameter name="topic">/CM/001/A1</ApiParameter>
            <ApiParameter name="QoS">1</ApiParameter>
        </Action>

        <Action name="SubscribeM2_QOS2" type="Subscribe">
            <ActionParameter name="connection_id">CF3</ActionParameter>
            <ApiParameter name="topic">/CM/001/A2</ApiParameter>
            <ApiParameter name="QoS">2</ApiParameter>
        </Action>

        <Action name="CloseConnectionM2" type="CloseConnection">
            <ActionParameter name="connection_id">CF3</ActionParameter>
        </Action>

        <Action name="StatSubA0_onA2" type="RestAPI">
            <ActionParameter name="structureID">stat_output_A</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Subscription?SubName=/CM/001/A0&amp;ClientID=CM_001_subM2</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="StatSubA1_onA2" type="RestAPI">
            <ActionParameter name="structureID">stat_output_B</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Subscription?SubName=/CM/001/A1&amp;ClientID=CM_001_subM2</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="StatSubA2_onA2" type="RestAPI">
            <ActionParameter name="structureID">stat_output_C</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Subscription?SubName=/CM/001/A2&amp;ClientID=CM_001_subM2</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="CreateConnection" type="CreateConnection">
            <ActionParameter name="structure_id">Con1</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <include>../common/ConnectionType.xml</include>
            <include>../common/MQTT_server.xml</include>
            <ApiParameter name="clientId">CM_001_pub1</ApiParameter>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="protocol">mqtt</ApiParameter>
            <ApiParameter name="cleanSession">true</ApiParameter>
        </Action>

        <Action name="CreateMessage_QoS0" type="CreateMessage">
            <ActionParameter name="structure_id">msg0</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">QoS=0 Message sent by (Prepare) testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <Action name="CreateMessage_QoS0_Retained" type="CreateMessage">
            <ActionParameter name="structure_id">msg0Retained</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">TEXT: (Prepare) Retained test content QoS=0 </ApiParameter>
            <ApiParameter name="RETAIN">true</ApiParameter>
        </Action>

        <Action name="CreateMessage_QoS1" type="CreateMessage">
            <ActionParameter name="structure_id">msg1</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">QoS=1 Message sent by (Prepare) testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <Action name="CreateMessage_QoS1_Retained" type="CreateMessage">
            <ActionParameter name="structure_id">msg1Retained</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">TEXT: (Prepare) Retained test content QoS=1 </ApiParameter>
            <ApiParameter name="RETAIN">true</ApiParameter>
        </Action>

        <Action name="CreateMessage_QoS2" type="CreateMessage">
            <ActionParameter name="structure_id">msg2</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">QoS=2 Message sent by (Prepare) testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <Action name="CreateMessage_QoS2_Retained" type="CreateMessage">
            <ActionParameter name="structure_id">msg2Retained</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">TEXT: (Prepare) Retained test content QoS=2 </ApiParameter>
            <ApiParameter name="RETAIN">true</ApiParameter>
        </Action>


        <Action name="SendMessage_QoS0" type="SendMessage" repeat="6">
            <dependsOn action_id="SubscribeM2_QOS2" interval="500"/>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg0</ActionParameter>
            <ActionParameter name="topic">/CM/001/A0</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS0_ret" type="SendMessage">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg0Retained</ActionParameter>
            <ActionParameter name="topic">/CM/001/A0</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS1" type="SendMessage" repeat="4">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg1</ActionParameter>
            <ActionParameter name="topic">/CM/001/A1</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS1_ret" type="SendMessage">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg1Retained</ActionParameter>
            <ActionParameter name="topic">/CM/001/A1</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS2" type="SendMessage" repeat="2">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg2</ActionParameter>
            <ActionParameter name="topic">/CM/001/A2</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS2_ret" type="SendMessage">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg2Retained</ActionParameter>
            <ActionParameter name="topic">/CM/001/A2</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
        </Action>

        <!-- take some stats here on both members. Give 1000 ms for publishing and
        forwarding to complete before taking the stats.   -->

        <Action name="StatServerA1_AfterPubA1" type="RestAPI">
            <dependsOn action_id="SendMessage_QoS2_ret" interval="1000"/>
            <ActionParameter name="structureID">stat_server_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Server</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compareStatServer_AfterPubA1" type="CompareREST">
            <ActionParameter name="structureID">stat_server_A1</ActionParameter>
            <ActionParameter name="topLevelKey">Server</ActionParameter>
            <ActionParameter name="topLevelType">JSONObject</ActionParameter>
            <ObjectProperty name="BufferedMessages" value="0"/>
        </Action>

        <Action name="StatSubA0_onA2_AfterPub" type="RestAPI">
            <ActionParameter name="structureID">stat_output_A0</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Subscription?SubName=/CM/001/A0&amp;ClientID=CM_001_subM2</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compare_StatSubA0_onA2_AfterPub" type="CompareREST">
            <ActionParameter name="structureID">stat_output_A0</ActionParameter>
            <ActionParameter name="topLevelKey">Subscription</ActionParameter>
            <ActionParameter name="subObjectKey">SubName</ActionParameter>
            <ActionParameter name="subObjectName">/CM/001/A0</ActionParameter>
            <ObjectProperty name="BufferedMsgs" value="7"/>
            <ObjectProperty name="PublishedMsgs" value="7"/>
        </Action>

        <Action name="StatSubA1_onA2_AfterPub" type="RestAPI">
            <ActionParameter name="structureID">stat_output_A1</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Subscription?SubName=/CM/001/A1&amp;ClientID=CM_001_subM2</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compare_StatSubA1_onA2_AfterPub" type="CompareREST">
            <ActionParameter name="structureID">stat_output_A1</ActionParameter>
            <ActionParameter name="topLevelKey">Subscription</ActionParameter>
            <ActionParameter name="subObjectKey">SubName</ActionParameter>
            <ActionParameter name="subObjectName">/CM/001/A1</ActionParameter>
            <ObjectProperty name="BufferedMsgs" value="5"/>
            <ObjectProperty name="PublishedMsgs" value="5"/>
        </Action>

        <Action name="StatSubA2_onA2_AfterPub" type="RestAPI">
            <ActionParameter name="structureID">stat_output_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Subscription?SubName=/CM/001/A2&amp;ClientID=CM_001_subM2</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compare_StatSubA2_onA2_AfterPub" type="CompareREST">
            <ActionParameter name="structureID">stat_output_A2</ActionParameter>
            <ActionParameter name="topLevelKey">Subscription</ActionParameter>
            <ActionParameter name="subObjectKey">SubName</ActionParameter>
            <ActionParameter name="subObjectName">/CM/001/A2</ActionParameter>
            <ObjectProperty name="BufferedMsgs" value="3"/>
            <ObjectProperty name="PublishedMsgs" value="3"/>
        </Action>

        <!-- Haven't restarted cluster yet, so the stats here are just for info -->
        <Action name="StatCluster_onA1_AfterPub" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- Haven't restarted cluster yet, so the stats here are just for info -->
        <Action name="StatCluster_onA2_AfterPub" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>


        <Action name="CloseConnection" type="CloseConnection">
            <ActionParameter name="connection_id">CF1</ActionParameter>
        </Action>
    </Action>


    <!-- After the above action, we take down both Members, bring up A1 and then publish some more. They should be buffered on A1
    until A2 is restarted. -->


    <Action name="Pubmore" type="CompositeAction">

        <Action name="CreateConnection" type="CreateConnection">
            <ActionParameter name="structure_id">Con1</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <include>../common/ConnectionType.xml</include>
            <include>../common/MQTT_server.xml</include>
            <ApiParameter name="clientId">CM_001_pub1</ApiParameter>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="protocol">mqtt</ApiParameter>
            <ApiParameter name="cleanSession">true</ApiParameter>
        </Action>


        <Action name="CreateMessage_QoS0" type="CreateMessage">
            <ActionParameter name="structure_id">msg0</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">QoS=0 Message sent by (Pubmore) testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <Action name="CreateMessage_QoS0_Retained" type="CreateMessage">
            <ActionParameter name="structure_id">msg0Retained</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">TEXT:(Pubmore) Retained test content QoS=0 </ApiParameter>
            <ApiParameter name="RETAIN">true</ApiParameter>
        </Action>

        <Action name="CreateMessage_QoS1" type="CreateMessage">
            <ActionParameter name="structure_id">msg1</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">QoS=1 Message sent by (Pubmore) testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <Action name="CreateMessage_QoS1_Retained" type="CreateMessage">
            <ActionParameter name="structure_id">msg1Retained</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">TEXT: (Pubmore) Retained test content QoS=1 </ApiParameter>
            <ApiParameter name="RETAIN">true</ApiParameter>
        </Action>

        <Action name="CreateMessage_QoS2" type="CreateMessage">
            <ActionParameter name="structure_id">msg2</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">QoS=2 Message sent by (Pubmore) testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <Action name="CreateMessage_QoS2_Retained" type="CreateMessage">
            <ActionParameter name="structure_id">msg2Retained</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">TEXT: (Pubmore) Retained test content QoS=2 </ApiParameter>
            <ApiParameter name="RETAIN">true</ApiParameter>
        </Action>

        <Action name="SendMessage_QoS0" type="SendMessage" repeat="6">
            <dependsOn action_id="CreateMessage_QoS2" interval="500"/>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg0</ActionParameter>
            <ActionParameter name="topic">/CM/001/A0</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS0_ret" type="SendMessage">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg0Retained</ActionParameter>
            <ActionParameter name="topic">/CM/001/A0</ActionParameter>
            <ActionParameter name="QoS">0</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS1" type="SendMessage" repeat="4">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg1</ActionParameter>
            <ActionParameter name="topic">/CM/001/A1</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS1_ret" type="SendMessage">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg1Retained</ActionParameter>
            <ActionParameter name="topic">/CM/001/A1</ActionParameter>
            <ActionParameter name="QoS">1</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS2" type="SendMessage" repeat="2">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg2</ActionParameter>
            <ActionParameter name="topic">/CM/001/A2</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
        </Action>

        <Action name="SendMessage_QoS2_ret" type="SendMessage">
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg2Retained</ActionParameter>
            <ActionParameter name="topic">/CM/001/A2</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
        </Action>


        <Action name="CloseConnection" type="CloseConnection">
            <ActionParameter name="connection_id">CF1</ActionParameter>
        </Action>


        <!-- take some stats here on A1. Really want to verify the buffered messages when those stats are available   -->

        <Action name="StatCluster_onA1_AfterPub2" type="RestAPI">
            <dependsOn action_id="CloseConnection" interval="1000"/>
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compareClusterAfter" type="CompareClusterStats">
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="serverName">``A2_IPv4_HOSTNAME_1``</ActionParameter>
            <ObjectProperty name="Status" value="Inactive"/>
            <ObjectProperty name="Health" value="Unknown"/>
            <ObjectProperty name="Memory" value="0"/>
            <ObjectProperty name="HAStatus" value="Unknown"/>
            <ObjectProperty name="Reconnect" value="0"/>
            <ObjectProperty name="ReadMsg" value="0"/>
            <ObjectProperty name="ReadBytes" value="0"/>
            <ObjectProperty name="WriteMsg" value="0"/>
            <ObjectProperty name="Reliable:BufferedMsgs" value="8"/>
            <ObjectProperty name="Reliable:BufferedMsgsHWM" value="8"/>
            <ObjectProperty name="Reliable:BufferedBytes" value="618"/>
            <ObjectProperty name="Reliable:MaxBytes" value="0"/>
            <ObjectProperty name="Reliable:SentMsgs" value="0"/>
            <ObjectProperty name="Reliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Reliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Reliable:Suspend" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgs" value="7"/>
            <ObjectProperty name="Unreliable:BufferedMsgsHWM" value="7"/>
            <ObjectProperty name="Unreliable:BufferedBytes" value="536"/>
            <ObjectProperty name="Unreliable:MaxBytes" value="0"/>
            <ObjectProperty name="Unreliable:SentMsgs" value="0"/>
            <ObjectProperty name="Unreliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Unreliable:Suspend" value="0"/>
        </Action>
    </Action>

    <!-- Before this, we bring Member 2 back up. And the messages that were buffered should flow to it. -->
    <Action name="UnSub" type="CompositeAction">

        <Action name="StatCluster_onA1_BeforeUnsub" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- the A2 server came up, so buffered messages should go to zero on A1 when we can dig down to those stats.-->
        <Action name="compareClusterBeforeUnsub" type="CompareClusterStats">

            <!-- A note about the Reconnect value. Defect 110276 was written, because it was sometimes incorrect.
                But after that is fixed, it will hopefully always be 2, as we reconnected two channels at this
                stage. However, it is possible that the Reconnect will more than two if we are breaking a channel and
                reconnecting.   That shouldn't happen, but might. If reconnect becomes a problem, we can change it
                here to indicate it should be 2 or greater than 2 in this verification. -->

            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="serverName">``A2_IPv4_HOSTNAME_1``</ActionParameter>
            <ObjectProperty name="Status" value="Active"/>
            <ObjectProperty name="Health" value="Green"/>
            <ObjectProperty name="Memory" value="0"/>
            <ObjectProperty name="HAStatus" value="None"/>
            <ObjectProperty name="Reconnect" value="2"/>
            <ObjectProperty name="ReadMsg" value="0"/>
            <ObjectProperty name="ReadBytes" value="0"/>
            <ObjectProperty name="WriteMsg" value="15"/>
            <ObjectProperty name="Reliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Reliable:BufferedMsgsHWM" value="8"/>
            <ObjectProperty name="Reliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Reliable:MaxBytes" value="0"/>
            <ObjectProperty name="Reliable:SentMsgs" value="8"/>
            <ObjectProperty name="Reliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Reliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Reliable:Suspend" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgsHWM" value="7"/>
            <ObjectProperty name="Unreliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Unreliable:MaxBytes" value="0"/>
            <ObjectProperty name="Unreliable:SentMsgs" value="7"/>
            <ObjectProperty name="Unreliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Unreliable:Suspend" value="0"/>
        </Action>

        <Action name="StatCluster_onA2_BeforeUnsub" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- the A2 server came up, so ReadMsgs from A1 should be 15. (these stats reset on server start -->
        <Action name="compareCluster_onA2_BeforeUnsub" type="CompareClusterStats">
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="serverName">``A1_IPv4_HOSTNAME_1``</ActionParameter>
            <ObjectProperty name="Status" value="Active"/>
            <ObjectProperty name="Health" value="Green"/>
            <ObjectProperty name="Memory" value="0"/>
            <ObjectProperty name="HAStatus" value="None"/>
            <ObjectProperty name="ReadMsg" value="15"/>
            <ObjectProperty name="ReadBytes" value="1154"/>
            <ObjectProperty name="WriteMsg" value="0"/>
            <ObjectProperty name="Reliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Reliable:BufferedMsgsHWM" value="0"/>
            <ObjectProperty name="Reliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Reliable:MaxBytes" value="0"/>
            <ObjectProperty name="Reliable:SentMsgs" value="0"/>
            <ObjectProperty name="Reliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Reliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Reliable:Suspend" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgsHWM" value="0"/>
            <ObjectProperty name="Unreliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Unreliable:MaxBytes" value="0"/>
            <ObjectProperty name="Unreliable:SentMsgs" value="0"/>
            <ObjectProperty name="Unreliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Unreliable:Suspend" value="0"/>

        </Action>

        <!-- Unsub by doing a cleansession=true. this should update the cluster -->
        <Action name="CreateConnection_cleanM2" type="CreateConnection">
            <ActionParameter name="structure_id">Con3</ActionParameter>
            <ActionParameter name="connection_id">CF3</ActionParameter>
            <include>../common/ConnectionType.xml</include>
            <include>../common/MQTT_server2.xml</include>
            <ApiParameter name="clientId">CM_001_subM2</ApiParameter>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="cleanSession">true</ApiParameter>
        </Action>

        <Action name="CloseConnection_cleanM2" type="CloseConnection">
            <ActionParameter name="connection_id">CF3</ActionParameter>
        </Action>

        <Action name="CreateConnection" type="CreateConnection">
            <ActionParameter name="structure_id">Con1</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <include>../common/ConnectionType.xml</include>
            <include>../common/MQTT_server.xml</include>
            <ApiParameter name="clientId">CM_001_pub1</ApiParameter>
            <include>../common/MQTT_port.xml</include>
            <ApiParameter name="protocol">mqtt</ApiParameter>
            <ApiParameter name="cleanSession">true</ApiParameter>
        </Action>

        <Action name="CreateMessage" type="CreateMessage">
            <ActionParameter name="structure_id">msg</ActionParameter>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ApiParameter name="msgType">TEXT</ApiParameter>
            <ApiParameter name="payload">Message sent by testmqtt_clusterCM_001 test: </ApiParameter>
            <ActionParameter name="incrementing">true</ActionParameter>
        </Action>

        <!-- slight delay is to allow the BloomFilter to propagate via Spidercast -->
        <Action name="SendMessage" type="SendMessage" repeat="25">
            <dependsOn action_id="CloseConnection_cleanM2" interval="500"/>
            <ActionParameter name="connection_id">CF1</ActionParameter>
            <ActionParameter name="message_id">msg</ActionParameter>
            <ActionParameter name="topic">/CM/001/A</ActionParameter>
            <ActionParameter name="QoS">2</ActionParameter>
        </Action>


        <!-- Aftr sending more messages, verify that they were not forwarded.   -->


        <Action name="StatClusterCall_onA1__AfterPubA2" type="RestAPI">
            <ActionParameter name="structureID">stat_cluster_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- the Subscription was gone, so the messages published on A1 should not be forwarded. ReadMsg remains 15 -->
        <Action name="compareStatCluster_onA1_AfterUnsub" type="CompareClusterStats">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="serverName">``A2_IPv4_HOSTNAME_1``</ActionParameter>
            <ObjectProperty name="Status" value="Active"/>
            <ObjectProperty name="Health" value="Green"/>
            <ObjectProperty name="Memory" value="0"/>
            <ObjectProperty name="HAStatus" value="None"/>
            <ObjectProperty name="ReadMsg" value="0"/>
            <ObjectProperty name="WriteMsg" value="15"/>
            <ObjectProperty name="WriteBytes" value="1154"/>
            <ObjectProperty name="Reliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Reliable:SentMsgs" value="8"/>
            <ObjectProperty name="Reliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Reliable:MaxBytes" value="0"/>
            <ObjectProperty name="Reliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Reliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Reliable:Suspend" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Unreliable:MaxBytes" value="0"/>
            <ObjectProperty name="Unreliable:SentMsgs" value="7"/>
            <ObjectProperty name="Unreliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Unreliable:Suspend" value="0"/>
        </Action>

        <Action name="StatClusterCall_onA2__AfterPubA2" type="RestAPI">
            <ActionParameter name="structureID">stat_cluster_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- the Subscription was gone, so the messages published on A1 should not be forwarded. ReadMsg remains 55 -->
        <Action name="compareStatCluster_onA2_AfterUnsub" type="CompareClusterStats">
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="serverName">``A1_IPv4_HOSTNAME_1``</ActionParameter>
            <ObjectProperty name="Status" value="Active"/>
            <ObjectProperty name="Health" value="Green"/>
            <ObjectProperty name="Memory" value="0"/>
            <ObjectProperty name="HAStatus" value="None"/>
            <ObjectProperty name="ReadMsg" value="15"/>
            <ObjectProperty name="WriteMsg" value="0"/>
            <ObjectProperty name="Reliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Reliable:BufferedMsgsHWM" value="0"/>
            <ObjectProperty name="Reliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Reliable:MaxBytes" value="0"/>
            <ObjectProperty name="Reliable:SentMsgs" value="0"/>
            <ObjectProperty name="Reliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Reliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Reliable:Suspend" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgsHWM" value="0"/>
            <ObjectProperty name="Unreliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Unreliable:MaxBytes" value="0"/>
            <ObjectProperty name="Unreliable:SentMsgs" value="0"/>
            <ObjectProperty name="Unreliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Unreliable:Suspend" value="0"/>
        </Action>

        <Action name="CloseConnection" type="CloseConnection">
            <ActionParameter name="connection_id">CF1</ActionParameter>
        </Action>
    </Action>

    <Action name="check" type="CompositeAction">

        <Action name="GetTraceLevelA1" type="RestAPI">
            <ActionParameter name="structureID">GetTraceLevelA1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/configuration/TraceLevel</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="GetTraceLevelA2" type="RestAPI">
            <ActionParameter name="structureID">GetTraceLevelA2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/configuration/TraceLevel</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="MonitorServerA1_start" type="RestAPI">
            <dependsOn action_id="GetTraceLevelA2" interval="10000"/>
            <ActionParameter name="structureID">mon_server_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/service/status</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="MonitorServerA2_start" type="RestAPI">
            <ActionParameter name="structureID">mon_server_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/service/status</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="StatServerA1_again" type="RestAPI">
            <ActionParameter name="structureID">stat_server_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Server</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="StatServerA2_again" type="RestAPI">
            <ActionParameter name="structureID">stat_server_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A2_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Server</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- Haven't restarted cluster yet, so the stats here are just for info -->
        <Action name="StatCluster_onA1" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="server">``A1_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <!-- Haven't restarted cluster yet, so the stats here are just for info -->
        <Action name="StatCluster_onA2" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A2</ActionParameter>
            <ActionParameter name="server">``A2_HOST``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>


        <Action name="StatCluster_onA1_BeforePub2" type="RestAPI">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="server">``A1_IPv4_1``:``A1_PORT``</ActionParameter>
            <ActionParameter name="path">/ima/v1/monitor/Cluster</ActionParameter>
            <ActionParameter name="action">GET</ActionParameter>
            <ActionParameter name="payload"></ActionParameter>
            <ActionParameter name="printResult">true</ActionParameter>
            <ActionParameter name="expectedStatusCode">200</ActionParameter>
            <ActionParameter name="expectedMessageCode"></ActionParameter>
        </Action>

        <Action name="compareClusterA1HOST" type="CompareClusterStats">
            <ActionParameter name="structureID">stat_Cluster_A1</ActionParameter>
            <ActionParameter name="serverName">``A2_IPv4_HOSTNAME_1``</ActionParameter>
            <!-- <ObjectProperty name="Status" value="Inactive"/> -->
            <!-- <ObjectProperty name="Health" value="Unknown"/> -->
            <ObjectProperty name="Memory" value="0"/>
            <!-- <ObjectProperty name="HAStatus" value="Unknown"/> -->
            <ObjectProperty name="Reconnect" value="0"/>
            <ObjectProperty name="ReadMsg" value="0"/>
            <ObjectProperty name="ReadBytes" value="0"/>
            <ObjectProperty name="WriteMsg" value="0"/>
            <ObjectProperty name="RetainedSync" value="true"/>
            <ObjectProperty name="Reliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Reliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Reliable:MaxBytes" value="0"/>
            <ObjectProperty name="Reliable:SentMsgs" value="0"/>
            <ObjectProperty name="Reliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Reliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Reliable:Suspend" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:BufferedMsgsHWM" value="0"/>
            <ObjectProperty name="Unreliable:BufferedBytes" value="0"/>
            <ObjectProperty name="Unreliable:MaxBytes" value="0"/>
            <ObjectProperty name="Unreliable:SentMsgs" value="0"/>
            <ObjectProperty name="Unreliable:DiscardedMsgs" value="0"/>
            <ObjectProperty name="Unreliable:ExpiredMsgs" value="0"/>
            <ObjectProperty name="Unreliable:Suspend" value="0"/>
        </Action>

    </Action>

</IsmWSTest>

